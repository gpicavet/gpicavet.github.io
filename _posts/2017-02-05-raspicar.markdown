---
layout: post
title:  "Raspberry automatic car - part I"
date:   2017-02-11 22:05:11 +0200
categories: jekyll update
---

![photo_1](/assets/raspicar/photo_1.jpg)
![photo_2](/assets/raspicar/photo_2.jpg)
![photo_3](/assets/raspicar/photo_3.jpg)


## Materials
<style>
  td {
    border : 1px solid gray;
  }
</style>
<table>
<tr><td> A Raspberry pi 3          </td><td> <img src="/assets/raspicar/pi3.jpg"/> </td></tr>
<tr><td> An Arduino UNO            </td><td> <img src="/assets/raspicar/arduino-uno.jpeg"/> </td></tr>
<tr><td> 2 Nema 11 Stepper Motors  </td><td> <img src="/assets/raspicar/motor.jpg"/> </td></tr>
<tr><td> 2 DRV8834 stepper drivers </td><td> <img src="/assets/raspicar/drv8834.jpeg"/> </td></tr>
<tr><td> 2 axis couplers           </td><td> <img src="/assets/raspicar/coupler.jpg"/> </td></tr>
<tr><td> 2 100ÂµF capacitors        </td><td> </td></tr>
<tr><td> a 10000mAh Li-ion USB Battery (2.4A max) </td><td> </td></tr>
<tr><td> Several jumper wires      </td><td> </td></tr>
<tr><td> a breadboard              </td><td> </td></tr>
</table>

## Schema
![Schema](/assets/raspicar/raspicar_v1_bb.png)

## Motors and drivers
I used Nema Bipolar Stepper motors because i needed precision and high couple.
Each Stepper Motor is controled with a DRV8834 in order to simplify the arduino code and to safely limit current.

## arduino part
The program is using AccelStepper Library to drive the motors.

## raspberry part

### Web UI
I used the Flask Library with python at server-side, and jquery at client-side

### video streaming
I recycled an old USB Webcam
I first tried ffmpeg and motion libraries but delay was too high (> 500ms).
I ended up using mjpeg as decribed in this article :  
https://jacobsalmela.com/2014/05/31/raspberry-pi-webcam-using-mjpg-streamer-over-internet/
So it's not really video but image capture, so you are limited to 10 fps max. It's good enough and delay is much better (100ms).

## source code

## Conclusion
